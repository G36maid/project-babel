# Project Babel - éŠæˆ²é–‹ç™¼è¦æ ¼æ›¸

**ç‰ˆæœ¬ï¼š** 1.0  
**æ—¥æœŸï¼š** 2026å¹´1æœˆ31æ—¥  
**ä¸»é¡Œï¼š** é¢å…· (GGJ2026)

---

## ğŸ® éŠæˆ²æ¦‚å¿µ

### æ ¸å¿ƒç†å¿µ

å››å€‹è¢«åœ‹ç•Œåˆ†éš”çš„æœ‹å‹å˜—è©¦é€éå¯©æŸ¥éæ¿¾çš„èŠå¤©ç³»çµ±é€²è¡Œæºé€šã€‚æ¯å€‹åœ‹å®¶éƒ½æœ‰è‡ªå·±çš„ç¦è©åˆ—è¡¨ï¼Œåƒã€Œé¢å…·ã€ä¸€æ¨£è¦†è“‹åœ¨è¨Šæ¯ä¸Šã€‚

ç©å®¶å¿…é ˆï¼š
1. å­¸ç¿’ç¬¦è™Ÿèªè¨€ï¼ˆ26å€‹ç¬¦è™Ÿï¼‰
2. æ¨æ–·è‡ªå·±åœ‹å®¶çš„å¯©æŸ¥è¦å‰‡
3. å¹«åŠ©å…¶ä»–äººç™¼ç¾ä»–å€‘çš„å¯©æŸ¥åˆ—è¡¨
4. å°‡æ‰€æœ‰ç¬¦è™Ÿå°æ‡‰åˆ°ç¾å¯¦ä¸–ç•Œçš„æ„ç¾©
5. å®Œæˆã€Œè¶Šç„å­—å…¸ã€

**å‹åˆ©æ¢ä»¶ï¼š** ç•¶æ‰€æœ‰å¯©æŸ¥è¦å‰‡è¢«è§£ç¢¼å¾Œï¼ŒèŠå¤©å®¤å°‡è¢«ã€Œè§£æ”¾ã€ï¼Œç©å®¶å¯ä»¥è‡ªç”±ä½¿ç”¨æ˜æ–‡äº¤æµã€‚

### è¨Šæ¯éæ¿¾è¦å‰‡

ç•¶ç©å®¶ Aï¼ˆåœ‹å®¶ Aï¼‰ç™¼é€è¨Šæ¯çµ¦ç©å®¶ Bï¼ˆåœ‹å®¶ Bï¼‰æ™‚ï¼š

```
åŸå§‹è¨Šæ¯ â†’ A åœ‹é˜²ç«ç‰† â†’ B åœ‹é˜²ç«ç‰† â†’ æ¥æ”¶è¨Šæ¯
```

- **é›™é‡å¯©æŸ¥ï¼š** ç™¼é€è€…å’Œæ¥æ”¶è€…çš„ç¦è©éƒ½æœƒè¢«éæ¿¾
- **æ›¿æ›è¦å‰‡ï¼š** ç¦è©è®Šæˆ `***`
- **ä¸å€åˆ†å¤§å°å¯«ï¼š** éæ¿¾æ™‚å¿½ç•¥å¤§å°å¯«

**ç¯„ä¾‹ï¼š**
- åœ‹å®¶ A ç¦æ­¢ï¼š`freedom`, `democracy`
- åœ‹å®¶ B ç¦æ­¢ï¼š`monarchy`, `tradition`
- Aliceï¼ˆAï¼‰ç™¼é€ï¼š"freedom and monarchy are good"
- Bobï¼ˆBï¼‰æ¥æ”¶ï¼š"*** and *** are good"

---

## ğŸ—ï¸ æŠ€è¡“æ¶æ§‹

### æŠ€è¡“å †ç–Š

**å‰ç«¯ï¼š**
- Vue 3 (Composition API)
- TypeScript (éåš´æ ¼æ¨¡å¼)
- Tailwind CSS
- Pinia (ç‹€æ…‹ç®¡ç†)
- Socket.IO Client

**å¾Œç«¯ï¼š**
- Rust (Axum æ¡†æ¶)
- Tokio (ç•°æ­¥é‹è¡Œæ™‚)
- Socket.IO server
- DashMap (ä¸¦ç™¼ç‹€æ…‹ç®¡ç†)

**é€šè¨Šæ–¹å¼ï¼š**
- HTTP REST API (æˆ¿é–“ç®¡ç†)
- WebSocket (å³æ™‚èŠå¤©)

---

## ğŸ“¡ API è¦ç¯„

**åŸºç¤ URLï¼š** `http://localhost:3000`

### HTTP ç«¯é»

#### `GET /api/info`

è¿”å›æœå‹™å™¨é…ç½®ï¼ˆä¸æ­éœ²å¯©æŸ¥è¦å‰‡ï¼‰ã€‚

**å›æ‡‰ï¼š**
```typescript
{
  countries: string[];  // ["A", "B", "C", "D"]
  max_players: number;  // 4
  symbols_count: number; // 26
}
```

#### `GET /api/rooms`

åˆ—å‡ºæ‰€æœ‰æ´»èºçš„æˆ¿é–“ IDã€‚

**å›æ‡‰ï¼š**
```typescript
string[]  // ["abc123", "def456"]
```

#### `POST /api/rooms`

å‰µå»ºæ–°æˆ¿é–“ã€‚éœ€è¦èº«ä»½é©—è­‰ã€‚

**è«‹æ±‚æ¨™é ­ï¼š**
```
X-User-Token: <token>
```

**å›æ‡‰ï¼š**
```typescript
string  // æˆ¿é–“ ID: "abc123"
```

**éŒ¯èª¤ï¼š**
- `403 Forbidden` - ç„¡æ•ˆçš„ token
- `500 Internal Server Error` - æˆ¿é–“å‰µå»ºå¤±æ•—

---

### WebSocket ç«¯é»

#### `WS /api/rooms/:roomId/connect`

ä»¥åƒèˆ‡è€…èº«ä»½é€£ç·šã€‚éœ€è¦ `X-User-Token` æ¨™é ­ã€‚

**é€£ç·šæ™‚ï¼š** æœå‹™å™¨ç™¼é€å®Œæ•´æˆ¿é–“ç‹€æ…‹çš„åˆå§‹ `RoomUpdate`ã€‚

**ç”Ÿå‘½é€±æœŸï¼š**
1. å®¢æˆ¶ç«¯ä½¿ç”¨èªè­‰ token é€£ç·š
2. æœå‹™å™¨é©—è­‰ token â†’ åˆ†é…åœ‹å®¶
3. æœå‹™å™¨å»£æ’­ã€Œç”¨æˆ¶åŠ å…¥ã€é€šçŸ¥
4. å®¢æˆ¶ç«¯å¯ä»¥ç™¼é€/æ¥æ”¶è¨Šæ¯ç›´åˆ°æ–·ç·š

---

### WebSocket è¨Šæ¯å”å®š

#### å®¢æˆ¶ç«¯ â†’ æœå‹™å™¨

**ç™¼é€ç¬¦è™Ÿè¨Šæ¯ï¼š**
```typescript
{
  "send_message": string  // ä¾‹å¦‚ï¼š"0 1 2 3 4" æˆ– "0,1,2,3,4"
}
```

**ç™¼é€æ¢ç´¢ç­†è¨˜ï¼ˆå¯é¸åŠŸèƒ½ï¼‰ï¼š**
```typescript
{
  "send_note": {
    [country: string]: string[]  // ç–‘ä¼¼çš„ç¦è©
  }
}
```

**é›¢é–‹æˆ¿é–“ï¼š**
```typescript
"leave_room"
```

---

#### æœå‹™å™¨ â†’ å®¢æˆ¶ç«¯

**RoomUpdate çµæ§‹ï¼š**

```typescript
interface RoomUpdate {
  room_state?: RoomState;        // å®Œæ•´ç‹€æ…‹ï¼ˆåŠ å…¥æˆ–åˆ·æ–°æ™‚ï¼‰
  new_messages?: Message[];      // å¢é‡æ›´æ–°
  notifications?: Notification[]; // åŠ å…¥/é›¢é–‹äº‹ä»¶
  room_closed?: boolean;         // æˆ¿é–“é—œé–‰ä¿¡è™Ÿ
  victory?: VictoryState;        // éŠæˆ²å®Œæˆæ•¸æ“š
}

interface RoomState {
  room_id: string;
  participants: Participant[];
  recent_messages: Message[];    // æœ€è¿‘ 50 æ¢è¨Šæ¯
  game_progress?: GameProgress;  // å¯é¸ï¼šé€²åº¦è¿½è¹¤
}

interface Participant {
  user_id: string;
  country: "A" | "B" | "C" | "D";
  joined_at: number;  // Unix æ™‚é–“æˆ³
}

interface Message {
  id: number;
  sender_id: string;
  sender_country: string;
  content: string;           // å¯èƒ½åŒ…å« ***
  was_censored: boolean;     // å¦‚æœä»»ä½•å­—è¢«éæ¿¾å‰‡ç‚º true
  censored_count?: number;   // è¢«å¯©æŸ¥çš„å­—æ•¸
  timestamp: number;
}

interface Notification {
  type: "join" | "leave" | "system";
  message: string;
  timestamp: number;
}

interface GameProgress {
  total_symbols: number;      // 26
  decoded_symbols: number;    // ç©å®¶å…±è­˜è¨ˆæ•¸
  completion_percent: number; // 0-100
}

interface VictoryState {
  achieved: boolean;
  dictionary: {
    [symbol: string]: string;  // ç¬¦è™Ÿ â†’ çœŸå¯¦å–®å­—å°æ‡‰
  };
  unlocked_at: number;  // æ™‚é–“æˆ³
}
```

---

## ğŸ² éŠæˆ²æ•¸æ“šçµæ§‹

### ç¬¦è™Ÿèªè¨€

**å®šç¾©ï¼š** 26 å€‹ç¨ç‰¹ç¬¦è™Ÿï¼ˆä½¿ç”¨ ID 0-25ï¼‰å°æ‡‰åˆ°çœŸå¯¦è‹±æ–‡å–®å­—ã€‚

**å„²å­˜æ ¼å¼ï¼š**
```typescript
{
  "0": "freedom",
  "1": "water",
  "2": "fire",
  "3": "hello",
  // ... 22 å€‹æ›´å¤š
  "25": "death"
}
```

**å±¬æ€§ï¼š**
- ç¬¦è™Ÿä½¿ç”¨æ•¸å­— ID (0-25)
- æ¯å€‹ç¬¦è™Ÿ = æ°å¥½ä¸€å€‹è‹±æ–‡å–®å­—
- èªè¨€æ˜¯ã€Œå®Œå‚™çš„ã€ï¼ˆå¯ä»¥é€éçµ„åˆè¡¨é”ä»»ä½•æ¦‚å¿µï¼‰

**æœªä¾†å¢å¼·ï¼š** å‰ç«¯é¡¯ç¤ºæ™‚ç”¨è‡ªå®šç¾©åœ–æ¡ˆ/åœ–ç¤ºå–ä»£æ•¸å­— IDã€‚

---

### å¯©æŸ¥é…ç½®

**æª”æ¡ˆï¼š** `backend/filter_config.json`

```json
{
  "A": ["freedom", "democracy", "protest"],
  "B": ["monarchy", "tradition", "heritage"],
  "C": ["capitalism", "profit", "market"],
  "D": ["religion", "faith", "prayer"]
}
```

**è¦å‰‡ï¼š**
- ä¸å€åˆ†å¤§å°å¯«åŒ¹é…
- å…¨å­—åŒ¹é…ï¼ˆé¿å…éƒ¨åˆ†åŒ¹é…ï¼‰
- é›™å‘æ‡‰ç”¨ï¼ˆç™¼é€è€… + æ¥æ”¶è€…ï¼‰

---

### ç”¨æˆ¶èªè­‰

**æª”æ¡ˆï¼š** `backend/user_tokens.json`

```json
{
  "test-token-alice": {
    "user_id": "alice",
    "country": "A"
  },
  "test-token-bob": {
    "user_id": "bob",
    "country": "B"
  },
  "test-token-charlie": {
    "user_id": "charlie",
    "country": "C"
  },
  "test-token-diana": {
    "user_id": "diana",
    "country": "D"
  }
}
```

---

## ğŸ¯ éŠæˆ²æµç¨‹

### éšæ®µ 1ï¼šæˆ¿é–“è¨­ç½®

1. ç©å®¶å°èˆªåˆ°éŠæˆ² URL
2. é¸æ“‡/è¼¸å…¥èªè­‰ tokenï¼ˆé–‹ç™¼æ¨¡å¼ï¼šä¸‹æ‹‰é¸æ“‡ï¼‰
3. å‰µå»ºæˆ–åŠ å…¥æˆ¿é–“
4. ç­‰å¾… 4 åç©å®¶ï¼ˆæ¯å€‹åœ‹å®¶ä¸€äººï¼‰

### éšæ®µ 2ï¼šæ¢ç´¢

ç©å®¶é€éèŠå¤©ï¼š

**è§£ç¢¼ç¬¦è™Ÿï¼š**
- ç™¼é€é¡ä¼¼ã€Œ0 0 0ã€çš„è¨Šæ¯ï¼ˆé‡è¤‡ç¬¦è™Ÿï¼‰
- è§€å¯Ÿå“ªäº›è¨Šæ¯è¢«å¯©æŸ¥
- å»ºç«‹å‡è¨­ï¼šã€Œå¦‚æœç¬¦è™Ÿ 0 è¢«åœ‹å®¶ B å¯©æŸ¥ï¼Œç¬¦è™Ÿ 0 å¯èƒ½æ˜¯ 'monarchy'ã€

**ç¹ªè£½å¯©æŸ¥è¦å‰‡ï¼š**
- ä¾†è‡ªåœ‹å®¶ A çš„ç©å®¶çœ‹ä¸åˆ°è‡ªå·±çš„éæ¿¾å™¨
- å¿…é ˆå¾å…¶ä»–äººçš„åé¥‹ä¸­å­¸ç¿’
- éœ€è¦å”ä½œæ¨ç†

**UI åŠŸèƒ½ï¼š**
- ç¬¦è™Ÿé¸æ“‡éµç›¤
- å€‹äººç­†è¨˜æœ¬ï¼ˆæœ¬åœ°å„²å­˜ï¼‰
- å¯©æŸ¥è¿½è¹¤å™¨ï¼ˆå¯é¸ï¼‰

### éšæ®µ 3ï¼šå‹åˆ©

**è§¸ç™¼æ¢ä»¶ï¼š** æœå‹™å™¨æª¢æ¸¬åˆ°ç©å®¶å·²ï¼š
- ç™¼é€çš„è¨Šæ¯æ¶µè“‹æ‰€æœ‰ 26 å€‹ç¬¦è™Ÿï¼ˆID 0-25ï¼‰
- åœ¨å¤§å¤šæ•¸å°æ‡‰ä¸Šé”æˆå…±è­˜ï¼ˆå¯é…ç½®çš„é–‘å€¼ï¼‰

**æœå‹™å™¨å›æ‡‰ï¼š**
```typescript
{
  "victory": {
    "achieved": true,
    "dictionary": { /* å®Œæ•´çš„ç¬¦è™Ÿâ†’å–®å­—å°æ‡‰ */ },
    "unlocked_at": 1738368000
  },
  "room_state": { /* æ›´æ–°çš„ç‹€æ…‹ï¼ŒèŠå¤©å®¤è§£é– */ }
}
```

**è§£é–åŠŸèƒ½ï¼š**
- ç©å®¶ç¾åœ¨å¯ä»¥è¼¸å…¥ç´”æ–‡æœ¬è‹±æ–‡
- å¯©æŸ¥éæ¿¾å™¨ç¦ç”¨
- å‹åˆ©ç•«é¢é¡¯ç¤ºå®Œæ•´å­—å…¸
- å¯é¸ï¼šå°å‡ºå­—å…¸ç‚º JSON

---

## ğŸ¨ å‰ç«¯çµ„ä»¶

### æ ¸å¿ƒè¦–åœ–

**HomeViewï¼š**
- Token é¸æ“‡
- æˆ¿é–“å‰µå»º/åŠ å…¥
- èªªæ˜æŒ‡å¼•

**GameViewï¼š**
- TelegramLayoutï¼ˆä¸»å®¹å™¨ï¼‰
- Sidebarï¼ˆåƒèˆ‡è€…åˆ—è¡¨ï¼‰
- ChatAreaï¼ˆè¨Šæ¯ + è¼¸å…¥ï¼‰
- SymbolKeyboardï¼ˆ26 å€‹ç¬¦è™ŸæŒ‰éˆ•ï¼ŒID 0-25ï¼‰

### ç‹€æ…‹ç®¡ç† (Pinia)

**gameStoreï¼š**
```typescript
{
  roomId: string | null;
  currentUser: { id: string; country: string } | null;
  participants: Participant[];
  messages: Message[];
  isConnected: boolean;
  victoryState: VictoryState | null;
  
  // å‹•ä½œ
  connect(token: string, roomId: string): void;
  sendMessage(content: string): void;
  disconnect(): void;
}
```

---

## ğŸ”§ å¾Œç«¯å¯¦ç¾

### æ ¸å¿ƒæ¨¡å¡Š

**`server.rs`**
- HTTP è·¯ç”± (`/api/info`, `/api/rooms`)
- WebSocket å‡ç´šè™•ç†å™¨
- Token èªè­‰ä¸­é–“ä»¶

**`room.rs`**
- æˆ¿é–“ç‹€æ…‹ç®¡ç†
- è¨Šæ¯å»£æ’­
- å¯©æŸ¥éæ¿¾æ‡‰ç”¨

**`filter.rs`**
- è¼‰å…¥ `filter_config.json`
- æ‡‰ç”¨é›™é‡éæ¿¾é‚è¼¯
- å–®å­—æ›¿æ›æ¼”ç®—æ³•

**`manager.rs`**
- æˆ¿é–“ç”Ÿå‘½é€±æœŸï¼ˆå‰µå»º/é”€æ¯€ï¼‰
- ç©å®¶åŠ å…¥/é›¢é–‹è™•ç†
- å‹åˆ©æ¢ä»¶æª¢æ¸¬

---

## ğŸ§ª æ¸¬è©¦å ´æ™¯

### æ¸¬è©¦æ¡ˆä¾‹ 1ï¼šåŸºæœ¬å¯©æŸ¥

1. Alice (A) ç™¼é€ï¼š"0 1 2"
2. å¦‚æœç¬¦è™Ÿ 0="freedom"ï¼ˆåœ¨ A åœ‹è¢«ç¦ï¼‰ï¼ŒBob çœ‹åˆ°ï¼š"*** 1 2"

### æ¸¬è©¦æ¡ˆä¾‹ 2ï¼šé›™é‡éæ¿¾

1. Charlie (C) ç™¼é€ï¼š"5 10" å…¶ä¸­ç¬¦è™Ÿ 5="monarchy", ç¬¦è™Ÿ 10="capitalism"
2. Diana (D) æ¥æ”¶ï¼š"*** 10"ï¼ˆç¬¦è™Ÿ 5 è¢« D åœ‹è¦å‰‡éæ¿¾ï¼‰
3. Bob (B) æ¥æ”¶ï¼š"*** ***"ï¼ˆç¬¦è™Ÿ 5 è¢« B éæ¿¾ï¼Œç¬¦è™Ÿ 10 è¢« C éæ¿¾ï¼‰

### æ¸¬è©¦æ¡ˆä¾‹ 3ï¼šå‹åˆ©è§¸ç™¼

1. ç©å®¶ç™¼é€ 100+ æ¢è¨Šæ¯æ¶µè“‹æ‰€æœ‰ç¬¦è™Ÿ
2. æœå‹™å™¨è¨ˆç®—è§£ç¢¼é€²åº¦
3. é”åˆ° 80% é–‘å€¼ â†’ å»£æ’­ `victory: true`

---

## ğŸ“‹ é–‹ç™¼æª¢æŸ¥æ¸…å–®

### å¾Œç«¯ (Rust)
- [x] HTTP è·¯ç”± (info, rooms, create)
- [x] WebSocket é€£ç·šè™•ç†
- [x] Token èªè­‰
- [x] é›™é‡å¯©æŸ¥éæ¿¾å™¨
- [x] æˆ¿é–“ç‹€æ…‹å»£æ’­
- [ ] å‹åˆ©æ¢ä»¶æª¢æ¸¬
- [ ] ç¬¦è™Ÿå­—å…¸ç”Ÿæˆ

### å‰ç«¯ (Vue)
- [x] HomeView (token é¸æ“‡)
- [x] GameView å¸ƒå±€
- [x] Socket.IO æ•´åˆ
- [x] è¨Šæ¯æ¸²æŸ“
- [ ] ç¬¦è™Ÿéµç›¤ UI
- [ ] å€‹äººç­†è¨˜æœ¬ (localStorage)
- [ ] å‹åˆ©ç•«é¢
- [ ] è§£é–èŠå¤©æ¨¡å¼

### ç¾åŒ–
- [ ] Telegram é¢¨æ ¼ UI ä¸»é¡Œ
- [ ] éŸ³æ•ˆï¼ˆè¨Šæ¯ç™¼é€/æ¥æ”¶ï¼‰
- [ ] å‹•ç•«ï¼ˆå¯©æŸ¥å–®å­—é¡¯ç¤ºï¼‰
- [ ] ç§»å‹•éŸ¿æ‡‰å¼è¨­è¨ˆ
- [ ] ç„¡éšœç¤™è¨ªå• (ARIA æ¨™ç±¤)

---

## ğŸš€ éƒ¨ç½²

**é–‹ç™¼ç’°å¢ƒï¼š**
```bash
# å¾Œç«¯
cd backend && cargo run

# å‰ç«¯
cd frontend && bun run dev
```

**ç”Ÿç”¢ç’°å¢ƒï¼š**
```bash
# å¾Œç«¯
cargo build --release

# å‰ç«¯
bun run build
```

**è¨—ç®¡ï¼š** Vercelï¼ˆå‰ç«¯ï¼‰+ Fly.ioï¼ˆå¾Œç«¯ WebSocketï¼‰

---

## ğŸ† GGJ æˆå°±åˆ—è¡¨ (Diversifiers)

| æˆå°± | å¯¦ç¾æ–¹å¼ |
|-------------|-------------|
| **Undefined Language** | 26 ç¬¦è™Ÿæ§‹é€ èªè¨€ |
| **Cross-Platform Play** | Web åŸºç¤ï¼ˆæ¡Œé¢ + ç§»å‹•ï¼‰ |
| **Cartridge Ready** | <10MB æ‰“åŒ…å¤§å° |
| **Random Encounter** | ç¨‹åºç”Ÿæˆå¯©æŸ¥åˆ—è¡¨ï¼ˆæœªä¾†ï¼‰ |
| **Strangers Thing** | åŒ¿åå¤šäººéŠæˆ² |

---

## ğŸ“ ç­†è¨˜

**æœªä¾†å¢å¼·ï¼š**
1. ç¨‹åºç”Ÿæˆç¬¦è™Ÿâ†’å–®å­—å°æ‡‰
2. è‡ªå®šç¾©åœ–æ¡ˆè¨­è¨ˆï¼ˆå‰ç«¯é¡¯ç¤ºåœ–ç¤ºè€Œéæ•¸å­—ï¼‰
3. èªéŸ³è¼¸å…¥/è¼¸å‡º (Web Speech API)
4. AI æç¤ºç³»çµ±å¹«åŠ©è‹¦æƒ±çš„ç©å®¶
5. æ’è¡Œæ¦œï¼ˆæœ€å¿«è§£ç¢¼æ™‚é–“ï¼‰

**å·²çŸ¥é™åˆ¶ï¼š**
- ç•¶å‰åŸå‹ä½¿ç”¨æ•¸å­— ID 0-25ï¼Œå‰ç«¯å¯é¡¯ç¤ºç‚ºåœ–ç¤º
- å‹åˆ©æª¢æ¸¬æ˜¯æ‰‹å‹•è§¸ç™¼ï¼ˆéè‡ªå‹•æª¢æ¸¬ï¼‰
- æ²’æœ‰æŒä¹…åŒ–ç”¨æˆ¶å¸³è™Ÿï¼ˆåƒ…åŸºæ–¼ tokenï¼‰
